---
- summary: |
    Успешная регистрация пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Email, Password
  steps:
    - Заполнить поля Nickname, Email, Password, Password Confirmation
    - Нажать Submit
  expected-result: |
    Пользователь успешно зарегистрирован в системе

- summary: |
    Авторизация пользователя с зарегистрированными почтой и паролем
  requirement: |
    При верном вводе почты и пароля пользователь должен войти в систему
  prerequisites: |
    Пользователь не авторизован
    Открыта страница авторизации
  test-data: |
    Логин = chuvashkinvictor@yandex.ru Пароль = MetalRacer777!
  steps:
    - Ввести почту и пароль, указанные при регистрации
    - Нажать кнопку «Submit»
  expected-result: |
    Пользователь успешно авторизован и находится на главной странице

- summary: |
    Авторизация через Github на странице авторизации
  requirement: |
    Пользователь должен иметь возможность авторизации через профиль Github
  prerequisites: |
    Пользователь зарегистрирован и авторизован в Github
    Пользователь не авторизован в Codebattle
    Открыта страница авторизации
  test-data: |
    empty
  steps:
    - Нажать на кнопку «Sign in with Github»
  expected-result: |
    Пользователь успешно авторизован в системе

- summary: |
    Авторизация через Discord на странице авторизации
  requirement: |
    Пользователь должен иметь возможность авторизации через профиль Discord
  prerequisites: |
    Пользователь зарегистрирован и авторизован в Discord
    Пользователь не авторизован в Codebattle
    Открыта страница авторизации
  test-data: |
    empty
  steps:
    - Нажать на кнопку «Sign in with Discord»
  expected-result: |
    Пользователь успешно авторизован в системе

- summary: |
    Попытка регистрации без подтверждения пароля
  requirement: |
    Система должна проверять заполнение необходимых полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Email, Password
  steps:
    - Заполнить только поля Nickname, Email, Password
    - Нажать Submit
  expected-result: |
    Отображается уведомление о необходимости заполнить поле Password Confirmation

- summary: |
    Попытка регистрации без ввода пароля
  requirement: |
    Система должна проверять заполнение необходимых полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Email
  steps:
    - Заполнить только поля Nickname, Email
    - Нажать Submit
  expected-result: |
    Отображается уведомление о необходимости заполнить поле пароля

- summary: |
    Попытка регистрации без ввода электронной почты
  requirement: |
    Система должна проверять заполнение необходимых полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Password
  steps:
    - Заполнить только поля Nickname, Password, Password Confirmation
    - Нажать Submit
  expected-result: |
    Отображается уведомление о необходимости заполнить поле электронной почты

- summary: |
    Попытка регистрации без ввода имени пользователя
  requirement: |
    Система должна проверять заполнение необходимых полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Email, Password
  steps:
    - Заполнить только поля Email, Password, Password Confirmation
    - Нажать Submit
  expected-result: |
    Отображается уведомление о необходимости заполнить поле имени пользователя

- summary: |
    Попытка регистрации с несовпадающими паролями
  requirement: |
    Система должна проверять валидность полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Email, Password
  steps:
    - Заполнить поля Nickname, Email, Password
    - В поле Password Confirmation написать значение, отличное от Password
    - Нажать Submit
  expected-result: |
    Отображается уведомление об ошибке при подтверждении пароля

- summary: |
    Авторизация через Github на странице регистрации
  requirement: |
    Пользователь должен иметь возможность авторизации через профиль Github
  prerequisites: |
    Пользователь зарегистрирован и авторизован в Github
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    empty
  steps:
    - Нажать на кнопку «Sign in with Github»
  expected-result: |
    Пользователь успешно авторизован в системе

- summary: |
    Авторизация через Discord на странице регистрации
  requirement: |
    Пользователь должен иметь возможность авторизации через профиль Discord
  prerequisites: |
    Пользователь зарегистрирован и авторизован в Discord
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    empty
  steps:
    - Нажать на кнопку «Sign in with Discord»
  expected-result: |
    Пользователь успешно авторизован в системе

- summary: |
    Валидация электронной почты при регистрации
  requirement: |
    Система должна проверять валидность полей при регистрации
  prerequisites: |
    Пользователь не авторизован
    Открыта страница регистрации
  test-data: |
    Nickname, Email, Password
  steps:
    - Заполнить поля Nickname, Password
    - В поле Email написать адрес эл.почты без @
  expected-result: |
    Пользователь видит сообщение об ошибке

- summary: |
    Возможность начать игру без регистрации на сайте
  requirement: |
    Незарегистрированный пользователь должен иметь возможность зайти в игру
  prerequisites: |
    Пользователь не авторизован
    Открыта страница сайта codebattle.hexlet.io
  test-data: |
    empty
  steps:
    - Нажать на кнопку «Try Simple Battle»
  expected-result: |
    Запустилась игра с заданием и ботом

- summary: |
    Создание игры с другими пользователями
  requirement: |
    Пользователь должен иметь возможность создавать игру
  prerequisites: |
    Пользователь авторизован и находится на странице https://codebattle.hexlet.io/
  test-data: |
     empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окошке нажать кнопку "Create battle"
  expected-result: |
    Информация о созданной игре отображается на странице https://codebattle.hexlet.io/ во вкладке Lobby

- summary: |
    Возможность присоединения к игре
  requirement: |
    Пользователь должен иметь возможность присоединяться к игре, созданной другим пользователем
  prerequisites: |
    Пользователь 1 создал игру для других пользователей
    Пользователь 2 авторизован и находится на странице https://codebattle.hexlet.io/
  test-data: |
    empty
  steps:
    - Пользователь 2 нажимает кнопку Fight напротив игры, созданной Пользователем 1
  expected-result: |
    Игра успешно запустилась у обоих пользователей

- summary: |
    Создание игры с ботом
  requirement: |
    Пользователь должен иметь возможность играть против бота
  prerequisites: |
    Пользователь авторизован и находится на странице https://codebattle.hexlet.io/
  test-data: |
    empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окошке в поле Game Type выбрать вариант "With a bot"
    - Нажать "Create battle"
  expected-result: |
    Игра с ботом успешно запустилась

- summary: |
    Возможность пригласить друга в игру
  requirement: |
    Пользователь должен иметь возможность создавать игру и приглашать в неё друзей
  prerequisites: |
    Пользователь 1 авторизован и находится на странице https://codebattle.hexlet.io/
    Пользователь 2 авторизован
  test-data: |
    Данные для авторизации второго пользователя: email = password
  steps:
    - Пользователь 1 открывает меню создания игры
    - Выбирает любой уровень
    - Выбирает вариант "With a friend"
    - Задаёт любое время игры
    - В списке Choose opponent выбирает имя пользователя 2
    - Выбирает любое задание
    - Нажимает на "Create invite"
  expected-result: |
    Пользователь 2 видит приглашение пользователя 1 на картинке со скрещенными мечами возле названия профиля

- summary: |
    Подключение к игре по приглашению от другого пользователя
  requirement: |
    Пользователь должен иметь возможность присоединяться к игре, созданной другим пользователем
  prerequisites: |
    Пользователь 1 авторизован и отослал приглашение пользователю 2
    Пользователь 2 авторизован и получил приглашение
  test-data: |
    Данные для авторизации второго пользователя: email, password
  steps:
    - Пользователь 2 нажимает на изображение двух мечей, где появилось приглашение
    - В открывшемся приглашении нажимает на Accept
  expected-result: |
    Оба пользователя успешно подключились к игре
    
- summary: |
    Соответствие таймера игры заданным настройкам
  requirement: |
    Пользователь должен иметь возможность настраивать время игры
  prerequisites: |
    Пользователь авторизован
    Открыто меню создания игры
  test-data: |
    Game type = with a bot, time control = стандартное значение
  steps:
    - В поле Game type выбрать "With a bot"
    - Убедиться, что значение времени равно 8 min
    - Нажать на "Create battle"
  expected-result: |
    Таймер игры начинает отсчёт с 00:08:00

- summary: |
    Установка минимального значения таймера игры
  requirement: |
    Пользователь должен иметь возможность настраивать время игры
  prerequisites: |
    Пользователь авторизован
    Открыто меню создания игры
  test-data: |
    Game type = with a bot, time control = 3 min
  steps:
    - В поле Game type выбрать "With a bot"
    - Передвинуть ползунок времени в крайнее левое положение
    - Нажать на "Create battle"
  expected-result: |
    Таймер игры начинает отсчёт с 00:03:00

- summary: |
    Установка максимального значения таймера игры
  requirement: |
    Пользователь должен иметь возможность настраивать время игры
  prerequisites: |
    Пользователь авторизован
    Открыто меню создания игры
  test-data: |
    Game type = with a bot, time control = 60 min
  steps:
    - В поле Game type выбрать "With a bot"
    - Передвинуть ползунок времени в крайнее правое положение
    - Нажать на "Create battle"
  expected-result: |
    Таймер игры начинает отсчёт с 01:00:00

- summary: |
    Запуск игры с выбранным заданием
  requirement: |
    Пользователь должен иметь возможность выбирать задание для игры
  prerequisites: |
    Пользователь авторизован
    Открыто меню создания игры
  test-data: |
    empty
  steps:
    - В Game Type выбрать "With a bot"
    - Выбрать любое задание из списка, отличное от варианта random task
    - Нажать на "Create battle"
  expected-result: |
    Игра запустилась с выбранным заданием

- summary: |
    Поздравление с победой при корректно написанном коде
  requirement: |
    Игра должна проверять пользователя
  prerequisites: |
    Запущена игра с ботом и заданием rect_area
  test-data: |
    const _ = require("lodash");
    const R = require("rambda");
    
    const solution = (width, length) => {
      return width * length;
    };

    module.exports = solution;
  steps:
    - Очистить поле для ввода кода
    - Ввести в поле для ввода кода значение из test-data
    - Нажать на кнопку "Run"
  expected-result: |
    В поле Output появилось уведомление о том, что все тесты пройдены; появилась анимация

- summary: |
    Тестирование некорректного кода
  requirement: |
    Программа должна проверять написанный код
  prerequisites: |
    Запущена игра с ботом и заданием rect_area, язык программирования Node.js 16.17.0
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Run"
  expected-result: |
    В поле Output появилось уведомление о проваленных тестах

- summary: |
    Возможность "Сдаться"
  requirement: |
    Пользователь должен иметь возможность сдаться
  prerequisites: |
    Запущена игра с любым заданием
  test-data: |
    empty
  steps:
    - Нажать на красный флажок
    - Нажать на Give up
  expected-result: |
    Появляется анимация с Бараком Обамой и уведомление о проигрыше

- summary: |
    Работа кнопки Cancel после нажатия на красный флажок
  requirement: |
    Пользователь должен иметь возможность передумывать сдаваться
  prerequisites: |
    Запущена игра с любым заданием
  test-data: |
    empty
  steps:
    - Нажать на красный флажок
    - Нажать на Cancel
  expected-result: |
    Игра продолжается

- summary: |
    Возможность присоединения к игре, созданной другим пользователем
  requirement: |
    Пользователь должен иметь возможность присоединяться к играм, созданным другими пользователями
  prerequisites: |
    Пользователь авторизован
    Открыта страница https://codebattle.hexlet.io/#lobby
  test-data: |
    empty
  steps:
    - В столбце Actions нажать на любую кнопку Fight, чтобы присоединиться к игре
  expected-result: |
    Пользователь присоединился к соответствующей игре

- summary: |
    Функция восстановления пароля
  requirement: |
    Пользователь должен иметь возможность восстановить пароль
  prerequisites: |
    Открыта страница авторизации
  test-data: |
    chuvashkinvictor@yandex.ru
  steps:
    - Нажать на кнопку "Forgot your password?"
    - Вписать email, введённый при регистрации
    - Нажать кнопку "Submit"
  expected-result: |
    На странице появилось уведомление об отправке письма на указанный email

- summary: |
    Соответствие уровня сложности предлагаемым заданиям
  requirement: |
    Игровые задания должны отличаться по уровню сложности
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Открыть меню создания игры
    - В поле Level поочерёдно выбрать разные уровни сложности
    - На каждом уровне сложности открывать список доступных заданий
  expected-result: |
    На каждом уровне сложности предлагаются разные задания

- summary: |
    Соответствие запущенного игрового задания выбранным ранее параметрам
  requirement: |
    Пользователь должен иметь возможность создавать игру
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Открыть меню создания игры
    - В поле Level выбрать любой уровень сложности
    - В поле Game Type выбрать игру с ботом
    - В поле Time control выбрать любое время игры
    - В поле выбора задания оставить вариант random task
    - Выбрать один из тегов
    - Нажать Create battle
  expected-result: |
    Запустилось задание, соответствующее всем заданным параметрам
    
- summary: |
    Открытие меню при нажатии на имя профиля
  requirement: |
    Пользователь должен иметь возможность настраивать профиль
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
  expected-result: |
    Открывается меню

- summary: |
    Возможность создания турнира
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля 
    - Перейти на вкладку Tournaments
    - Перейти на нижнюю часть страницы под заголовком Create a new tournament
    - В поле Name ввести любое название
  expected-result: |
    Открылось окно запуска турнира с таймером обратного отсчёта

- summary: |
    Возможность общаться в чате в окне турнира
  requirement: |
    Зарегистрированные пользователи должны иметь возможность общаться в чате турнира
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - Убедиться, что стоит галочка в чекбоксе Use chat
    - Нажать на Create
    - Написать и отправить сообщение в чате турнира
  expected-result: |
    Сообщение отправилось в чат

- summary: |
    Возможность выбирать название турнира
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    Name = My test tournament 1
  steps:
    - В поле Name ввести значение из test-data
    - Нажать Create
  expected-result: |
    Запущен турнир с названием My test tournament 1

- summary: |
    Выбор командного типа турнира
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - В поле Type выбрать вариант team
  expected-result: |
    Появилась возможность настраивать названия команд и количество выигранных раундов, необходимое для победы

- summary: |
    Выбор турнира "лестница" (stairway)
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - В поле Type выбрать вариант stairway
  expected-result: |
    Появилась возможность настраивать число и длительность раундов

- summary: |
    Выбор турнира "swiss"
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - В поле Type выбрать вариант swiss
  expected-result: |
    Появилась возможность настраивать число и длительность раундов

- summary: |
    Выбор турнира "ladder"
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - В поле Type выбрать вариант ladder
  expected-result: |
    Дополнительные настройки не появляются

- summary: |
    Опция настройки длительности раундов в поле формата json
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites: |
    Пользователь авторизован
    Открыта вкладка Tournaments
  test-data: |
    empty
  steps:
    - В поле Type сначала выбрать вариант stairway или swiss
    - В поле Rounds config type выбрать per_round
    - Теперь выбрать вариант ladder
  expected-result: |
    Поле формата json для настройки длительности раундов не отображается

- summary: |
    Возможность зайти в профиль
  requirement: |
    Пользователь должен иметь возможность настраивать профиль
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
    - Нажать на My Profile
  expected-result: |
    Открывается страница, показывающая статистику о пользователе

- summary: |
    Возможность зайти в настройки
  requirement: |
    Пользователь должен иметь возможность настраивать профиль
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
    - Нажать на Settings
  expected-result: |
    Открывается страница с настройками

- summary: |
    Сохранение настроек профиля
  requirement: |
    Пользователь должен иметь возможность настраивать профиль
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
    - Нажать на Settings
    - В поле выбора языка (your weapon) поменять язык на любой другой
    - Нажать Save
    - Нажать на имя профиля и зайти в My Profile
  expected-result: |
    Под именем профиля отображается символ выбранного языка программирования

- summary: |
    Возможность посмотреть рейтинг пользователей
  requirement: |
    Должна быть реализована система рейтинга игроков за неделю, месяц и всё время
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
    - Нажать на Users rating
  expected-result: |
    Открывается таблица с рейтингом пользователей за месяц, неделю и всё время

- summary: |
    Функциональность страницы создания новой игровой задачи
  requirement: |
    Пользователь должен иметь возможность создавать новые задания для игр
  prerequisites: |
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать на имя профиля
    - Нажать на Tasks
    - Нажать на Create new task
    - Заполнить все доступные поля
  expected-result: |
    Все имеющиеся доступные поля заполняются соответствующими типами данных

- summary: |
    Возможность создать свой набор заданий для турниров
  requirement: |
    Пользователь должен иметь возможность выбирать задание для игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Name = My test task pack, Task_ids = 1,5,7
  steps:
    - Нажать на имя профиля
    - Нажать на Tasks
    - Нажать на Task Packs
    - Нажать на Create new task pack
    - Ввести название в поле Name
    - Ввести номера заданий в поле Task_ids
    - Нажать Save
  expected-result: |
    Набор выбранных заданий успешно сохранён

- summary: |
    Попытка входа с некорректным паролем
  requirement: |
    Пользователь должен иметь возможность авторизации с использованием эл.почты и пароля
  prerequisites: |
    Пользователь зарегистрирован
  test-data: |
    empty
  steps:
    - Перейти на страницу авторизации
    - Заполнить поле Email данными, указанными при регистрации
    - Заполнить поле Password данными, не соответствующими тем, которые были указаны при регистрации
    - Нажать Submit
  expected-result: |
    Вход в систему не осуществлён, отображается уведомление о неправильном пароле

- summary: |
    Попытка входа с некорректным email
  requirement: |
    Пользователь должен иметь возможность авторизации с использованием эл.почты и пароля
  prerequisites: |
    Пользователь зарегистрирован
  test-data: |
    empty
  steps:
    - Перейти на страницу авторизации
    - Заполнить поле Email без символа @
    - Заполнить поле Password данными, указанными при регистрации
    - Нажать Submit
  expected-result: |
    Вход в систему не осуществлён, отображается уведомление о невалидном email

- summary: |
    Написание имени пользователя на кириллице на странице регистрации
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    empty
  steps:
    - Перейти на страницу регистрации
    - Заполнить поле Nickname буквами кириллицы
    - Заполнить остальные поля валидными данными
    - Нажать Submit
  expected-result: |
    Появляется уведомление о недопустимых символах в имени пользователя

